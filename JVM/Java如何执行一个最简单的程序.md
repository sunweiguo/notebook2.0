title: Javaå¦‚ä½•æ‰§è¡Œä¸€ä¸ªæœ€ç®€å•çš„ç¨‹åº
tag: JVM
---

æœ¬ç¯‡ä¸ºå­¦ä¹ JAVAè™šæ‹Ÿæœºçš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œéœ€è¦ä¹‹å‰å¯¹JVMæœ‰ä¸€å®šäº†è§£çš„åŸºç¡€ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJAVAå·ç§°ï¼šä¸€æ¬¡ç¼–è¯‘å¤šå¤„è¿è¡Œã€‚è¿™å°±ç¦»ä¸å¼€å­—èŠ‚ç æ–‡ä»¶å’Œè™šæ‹Ÿæœºå•¦ï¼é‚£ä¹ˆï¼Œè™šæ‹Ÿæœºåˆ°åº•æ˜¯å¦‚ä½•å»æ‰§è¡Œä¸€ä¸ªç®€å•çš„ç¨‹åºçš„å‘¢ï¼Ÿç†è§£äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥ç†è§£javaæ—¶å¦‚ä½•åšåˆ°å¹³å°æ— å…³çš„äº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æåˆ†æã€‚
<!-- more -->

é¦–å…ˆï¼Œå†™ä¸€ä¸ªæœ€ç®€å•çš„ç¨‹åºï¼š


```java
public class Main {
    public static void main(String[] args) {
        int i=1,j=5;
        i++;
        ++j;
        System.out.println(i);
        System.out.println(j);
    }
}
```

è¿è¡Œä¹‹åçš„ç»“æœæƒ³å¿…å°±ä¸€ç›®äº†ç„¶ï¼Œæˆ‘ä»¬å°±é€šè¿‡è¿™ä¸ªç¨‹åºæ¥åˆ†æåˆ†æåˆ°åº•æ˜¯æ€ä¹ˆæ‰§è¡Œè¿™ä¸ªç¨‹åºé¢çš„ã€‚

é¦–å…ˆå‘¢ï¼Œjavaç¨‹åºçš„æ‰§è¡Œç»å†ç¼–è¯‘ï¼Œç¼–è¯‘æˆç³»ç»Ÿèƒ½è¯†åˆ«çš„æ–‡ä»¶ï¼Œè¿™é‡Œçš„ç³»ç»Ÿå¯¹åº”javaè¯­è¨€å°±æ˜¯JVMï¼Œå³JAVAè™šæ‹Ÿæœºã€‚JVMåœ¨è¯†åˆ«ä¹‹åï¼Œå†å»ä¸æˆ‘ä»¬çœŸæ­£çš„æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’å’Œå¤„ç†ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ª.javaç¨‹åºï¼Œå¿…é¡»è¦å…ˆè¿›è¡Œç¼–è¯‘ã€‚åˆå­¦è€…éƒ½ä¼šå­¦ä¹ ä¸€ä¸ªæŒ‡ä»¤å«åš`javac`ï¼š

![image](http://bloghello.oursnail.cn/javabasic6-1.png)

æˆ‘ä»¬ä¼šå‘ç°è·¯å¾„ä¸‹é¢å°±ä¼šå¤šä¸€ä¸ª.classæ–‡ä»¶ï¼Œè¿™å°±æ˜¯ç¼–è¯‘ä¹‹åçš„æ–‡ä»¶ã€‚ç›´æ¥ç‚¹å¼€ï¼š


```java
//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by Fernflower decompiler)
//

public class Main {
    public Main() {
    }

    public static void main(String[] var0) {
        byte var1 = 1;
        byte var2 = 5;
        int var3 = var1 + 1;
        int var4 = var2 + 1;
        System.out.println(var3);
        System.out.println(var4);
    }
}
```
æˆ‘ä»¬çœ‹ç¬¬ä¸€è¡Œæ³¨é‡Šï¼Œè¯´çš„æ˜¯ç¼–è¯‘åçš„æ–‡ä»¶å·²ç»è‡ªåŠ¨è¢«`IDEA`åç¼–è¯‘äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜èƒ½çœ‹å¾—æ‡‚ã€‚çœŸæ­£çš„æ–‡ä»¶æ˜¯ï¼š


```
æ¼±å£•   4 
  	  
     <init> ()V Code LineNumberTable main ([Ljava/lang/String;)V 
SourceFile 	Main.java         Main java/lang/Object java/lang/System out Ljava/io/PrintStream; java/io/PrintStream println (I)V !                    *? ?    	        	 
      E     <=??? ? ? ? ? 
```


æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®æ˜¯ä¸€å †ä¹±ç ï¼Œæ ¹æœ¬çœ‹ä¸æ‡‚ã€‚è€Œåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œclassæ–‡ä»¶æ˜¯ä¸€ç§8ä½å­—èŠ‚çš„äºŒè¿›åˆ¶æµæ–‡ä»¶ã€‚æ”¾åœ¨`sublime`ä¸­å¯ä»¥çœ‹åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä»¥16è¿›åˆ¶æ˜¾ç¤ºï¼Œåœ¨JAVAè™šæ‹Ÿæœºä¸­å°†æ¥äº†è§£è¿™å„æ–‡ä»¶çš„å«ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªå•è¯æ˜¯cafe babeï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªclasså­—èŠ‚ç æ–‡ä»¶ï¼‰ï¼š

![image](http://bloghello.oursnail.cn/javabasic6-2.png)

é‚£ä¹ˆæˆ‘ä»¬æƒ³çœ‹çœ‹.classä¸­çš„ä¿¡æ¯ï¼Œè¿˜æ˜¯éœ€è¦åç¼–è¯‘ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨`javap`æŒ‡ä»¤æ¥åšã€‚å¦‚æœæˆ‘ä»¬å¯¹å…¶ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å…ˆæ‰§è¡Œ`javap -help`æ¥äº†è§£äº†è§£ã€‚



```
ç”¨æ³•: javap <options> <classes>
å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬:
  -help  --help  -?        è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯
  -version                 ç‰ˆæœ¬ä¿¡æ¯
  -v  -verbose             è¾“å‡ºé™„åŠ ä¿¡æ¯
  -l                       è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨
  -public                  ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜
  -protected               æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜
  -package                 æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»
                           å’Œæˆå‘˜ (é»˜è®¤)
  -p  -private             æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜
  -c                       å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–
  -s                       è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å
  -sysinfo                 æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„
                           ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)
  -constants               æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡
  -classpath <path>        æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®
  -cp <path>               æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®
  -bootclasspath <path>    è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®
```

æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæœ‰ä¸€ä¸ª`-c`æ˜¯è¿›è¡Œåæ±‡ç¼–ï¼Œé‚£ä¹ˆå°±ç”¨å®ƒè¯•è¯•:


```
E:\JavaBasic\src>javap -c Main.class


Compiled from "Main.java"
public class Main {
  public Main();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: iconst_1
       1: istore_1
       2: iconst_5
       3: istore_2
       4: iinc          1, 1
       7: iinc          2, 1
      10: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      13: iload_1
      14: invokevirtual #3                  // Method java/io/PrintStream.println:(I)V
      17: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      20: iload_2
      21: invokevirtual #3                  // Method java/io/PrintStream.println:(I)V
      24: return
}
```

é‚£ä¹ˆè¿™åæ±‡ç¼–å‡ºæ¥çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯ä¸€è¿ä¸²çš„æŒ‡ä»¤ï¼Œå…¶å®è¿™äº›æ˜¯åŠ è½½classæ–‡ä»¶æ—¶çœŸæ­£æ‰§è¡Œçš„javaè™šæ‹ŸæœºæŒ‡ä»¤ã€‚


æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„å«ä¹‰å§ï¼

![image](http://bloghello.oursnail.cn/javabasic6-3.png)


ä»”ç»†çœ‹çœ‹ï¼Œå…¶å®å‘ç°å¹¶ä¸ç¥ç§˜ï¼Œä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œæ˜¯ä¸€ä¸ªå…¥æ ˆå‡ºæ ˆçš„è¿‡ç¨‹ã€‚okï¼Œå¤§ä½“äº†è§£äº†å­—èŠ‚ç æ–‡ä»¶æ˜¯ä»€ä¹ˆä»¥åŠé‡Œé¢çš„æŒ‡ä»¤å«ä¹‰ä¹‹åï¼Œæˆ‘ä»¬å¯¹javaå¦‚ä½•æ‰§è¡Œå®ƒå·²ç»å¤§ä½“æ¸…æ¥šäº†ã€‚ä¸‹é¢æ‰§è¡Œä¸€ä¸‹ï¼š

é‚£ä¹ˆå¦‚ä½•è¿è¡Œå‘¢ï¼Ÿ

![image](http://bloghello.oursnail.cn/javabasic6-4.png)

å…¶å®è¿™æ˜¯åºŸè¯ï¼Œåˆå­¦javaå…¶å®æ˜¯`java Main`è¿è¡Œçš„ï¼š

```
E:\JavaBasic\src>java Main

2
6
```

è¿™ä¸ªæ—¶å€™ï¼Œclassæ–‡ä»¶å¯ä»¥ç§»æ¤åˆ°ä»»ä½•å¹³å°ä¸Šå»ï¼Œæ¯”å¦‚ç›´æ¥ä¸Šä¼ åˆ°`linux`ä¸Šï¼Œåªè¦JDKæˆ–è€…JREç¯å¢ƒç±»ä¼¼å³å¯ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒæ˜¯ä»€ä¹ˆç³»ç»Ÿã€‚è¿™å°±åšåˆ°äº†ä¸€æ¬¡ç¼–è¯‘åˆ°å¤„è¿è¡Œã€‚

ä¸‹é¢æ€»ç»“ä¸€ä¸‹ï¼š

![image](http://bloghello.oursnail.cn/javabasic6-5.png)

Javaæºç é¦–å…ˆè¢«ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œå†ç”±ä¸åŒå¹³å°çš„JVMè¿›è¡Œè§£æï¼ŒJAVAè¯­è¨€åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œæ—¶ä¸éœ€è¦è¿›è¡Œé‡æ–°ç¼–è¯‘ï¼ŒJAVAè™šæ‹Ÿæœºåœ¨æ‰§è¡Œå­—èŠ‚ç çš„æ—¶å€™ï¼ŒæŠŠå­—èŠ‚ç è½¬æ¢ä¸ºå…·ä½“å¹³å°ä¸Šçš„æœºå™¨æŒ‡ä»¤ï¼Œç„¶åå„ç§æ“ä½œç³»ç»Ÿå°±å¯ä»¥æ­£ç¡®è¯†åˆ«äº†ã€‚è¿™å°±æ˜¯JAVAå¦‚ä½•æ‰§è¡Œä»£ç å’Œå¹³å°æ— å…³æ€§çš„åŸå› ã€‚